(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";window.onload=function(){var e,t,n,a=document.getElementsByTagName("path"),o=document.getElementById("visualizer"),r=o.getElementById("mask"),s=document.getElementsByTagName("h1")[0],i=document.getElementsByTagName("h1")[1],c=!1,l=!1,m=0,u=function(e){l=!0;var u=t.createMediaStreamSource(e),d=t.createAnalyser();d.fftSize=1024,u.connect(d);var p=d.frequencyBinCount,f=new Uint8Array(p);o.setAttribute("viewBox","0 0 255 255");for(var g=0;g<255;g++)(n=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("stroke-dasharray","4,1"),r.appendChild(n);!function e(){if(requestAnimationFrame(e),c){var t;d.getByteFrequencyData(f);for(var n=0;n<255;n++)t=Math.floor(f[n])-Math.floor(f[n])%5,a[n].setAttribute("d","M "+n+",255 l 0,-"+t)}else for(n=0;n<255;n++)a[n].setAttribute("d","M "+n+",255 l 0,-0")}(),function e(){if(setTimeout(e,500),c){d.getByteFrequencyData(f);for(var t=0,n=0;n<255;n++){var a=f[n];t+=a*a}var o=Math.sqrt(t/p),r=Math.log(o)/Math.log(10)*20;r=Math.max(r,0),s.innerHTML=Math.floor(r)+" dB",r>=30?(m+=.5)>=5&&(i.innerHTML="You\u2019ve been in loud environment for<span> "+Math.floor(m)+" </span>seconds."):(m=0,i.innerHTML="")}else s.innerHTML="",i.innerHTML=""}()},d=function(e){s.innerHTML="You must allow your microphone.",console.log(e)};document.getElementById("button").onclick=function(){c?(c=!1,this.innerHTML="<span class='fa fa-play'></span>Start Listen",this.className="green-button btn-circle btn-sm btn-xl btn-md"):(l||(navigator.mediaDevices.getUserMedia({audio:!0}).then(u).catch(d),e=window.AudioContext||window.webkitAudioContext,t=new e),c=!0,this.innerHTML="<span class='fa fa-stop'></span>Stop Listen",this.className="red-button btn-circle btn-sm btn-xl btn-md")}}},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(3),s=n.n(r),i=(n(11),n(12),n(13),n(1)),c=n.n(i),l=n(4),m=n(5),u=n.n(m);function d(){return(d=Object(l.a)(c.a.mark((function e(t,n){var a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new FormData,console.log(n),a.append("file",t,n+".mp3"),o={url:"http://127.0.0.1:8000/upload/",method:"POST",timeout:0,processData:!1,mimeType:"audio/mp3",contentType:!1,data:a},u.a.ajax(o).done((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}void 0===navigator.mediaDevices?(navigator.mediaDevices={},navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,a){t.call(navigator,e,n,a)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}):navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){console.log(e.kind.toUpperCase(),e.label)}))})).catch((function(e){console.log(e.name,e.message)})),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t=this,n=document.getElementById("button"),a=document.getElementById("audio2");a.hidden=!0;var o=new MediaRecorder(e),r=[],s=!1,i={};n.addEventListener("click",(function(e){s?(s=!1,o.stop(),i.stop=+new Date,i.duration=(i.end-i.start)/100,console.log(o.state,"Time"+i.duration),t.innerHTML="<span class='fa fa-play'></span>",t.className="green-button btn-circle btn-sm btn-xl btn-md"):(o.start(),i.start=+new Date,r.length=0,console.log(o.state),s=!0,t.innerHTML="<span class='fa fa-stop'></span>",t.className="red-button btn-circle btn-sm btn-xl btn-md")})),o.ondataavailable=function(e){r.push(e.data)},o.onstop=function(e){var t=new Blob(r,{type:"audio/mp3;"});r=[];var n=window.URL.createObjectURL(t);a.src=n,a.hidden=!1,function(e,t){d.apply(this,arguments)}(t,n)}})).catch((function(e){console.log(e.name,e.message)}));n(15);var p=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("svg",{preserveAspectRatio:"none",id:"visualizer",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.a.createElement("defs",null,o.a.createElement("mask",{id:"mask"},o.a.createElement("g",{id:"maskGroup"})),o.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},o.a.createElement("stop",{offset:"0%",style:{stopColor:"#db6247",stopOpacity:1}}),o.a.createElement("stop",{offset:"40%",style:{stopColor:"#f6e5d1",stopOpacity:1}}),o.a.createElement("stop",{offset:"60%",style:{stopColor:"#5c79c7",stopOpacity:1}}),o.a.createElement("stop",{offset:"85%",style:{stopColor:"#b758c0",stopOpacity:1}}),o.a.createElement("stop",{offset:"100%",style:{stopColor:"#222",stopOpacity:1}}))),o.a.createElement("rect",{x:0,y:0,width:"100%",height:"100%",fill:"url(#gradient)",mask:"url(#mask)"})),o.a.createElement("h1",{className:"main-text"},"Please allow the use of your microphone."),o.a.createElement("h1",{className:"sub-text"}),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{id:"button",className:"green-button btn-circle btn-sm btn-xl btn-md"},o.a.createElement("span",{className:"fa fa-play"})),o.a.createElement("br",null),o.a.createElement("p",null,o.a.createElement("audio",{id:"audio2",controls:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);
//# sourceMappingURL=main.74d3c78a.chunk.js.map